Trencher 4

./trencher -b -f ../examples/postgresql/lamport/lamport.txt
filename ../examples/postgresql/lamport/lamport.txt action 1 threadsCount 2 statesCount 40 transitionsCount 52 potentialAttacksCount 128 infeasibleAttacksCount1 16 infeasibleAttacksCount2 86 feasibleAttacksCount 26 fencesCount 4 spinTime 4772 compilerTime 106462 verifierTime 6660 cpuTime 330 realTime 59651

Persist 8

[phong@localhost build]$ ./PERSIST -b -f 2 ../examples/postgresql/lamport/lamport.txt
Computed fences for enforcing persistence (8 total): (t1,q5) (t1,q8) (t1,q2) (t1,q11) (t2,q8) (t2,q2) (t2,q11) (t2,q5)
*********************************************
 Thread number: 2
 State number: 40
 Transition number: 52
 PotentialAttackNum: 12
 InfeasibleAttackNum: 0
 InfeasibleAttackNum: 0
 FeasibleAttackNum: 0
 Fence number: 8
 SpinTime in miliseconds: 417
 CompilerTime in miliseconds: 9078
 VerifierTime in miliseconds: 565
 SeqRealTime in miliseconds: 10060
 RealTime in milisecond: 5942
*********************************************



Memorax 4

memorax fencins -a sb ../examples/postgresql/lamport/lamport.rmm 
Found 1 synchronization set:
Totally 4 unique synchronizations:
A: Lock write: L16 P0: write: x := 1

B: Lock write: L25 P0: write: y := 1

C: Lock write: L51 P1: write: x := 2

D: Lock write: L60 P1: write: y := 2

Synchronization sets:
#0: {A, B, C, D}
Total time to insert fences: 156.2 s


Musketeer  15


[phong@localhost build]$ ./goto-cc -o ../examples/postgresql/lamport/lamport.gb ../examples/postgresql/lamport/lamport.c
[phong@localhost build]$ ./musketeer --mm tso ../examples/postgresql/lamport/lamport.gb 
Reading GOTO program from ../examples/postgresql/lamport/lamport.gb
Adding CPROVER library
Partial Inlining
Function Pointer Removal
Pointer Analysis
Fence detection for tso via critical cycles and ILP
Adding weak memory (TSO) Instrumentation
--------
Temporary variables added
Dependencies analysis enabled
Number of threads detected: 2
Graph with 26 nodes has 1 interesting SCCs
Number of reads: 12
Number of writes: 14
Number of wse: 5
Number of rfe/fre: 26
Number of goto-instructions: 91
Abstract event graph computed

cycles collected: 23 cycles found
i: 1033 mat_size: 1032
Optimal solution found
minimal cost: 45
1 -> 2 : fence
(between file ../examples/postgresql/lamport/lamport.c line 15 function thr1 and file ../examples/postgresql/lamport/lamport.c line 16 function thr1
18 -> 19 : fence
(between file ../examples/postgresql/lamport/lamport.c line 65 function thr2 and file ../examples/postgresql/lamport/lamport.c line 66 function thr2
14 -> 15 : fence
(between file ../examples/postgresql/lamport/lamport.c line 57 function thr2 and file ../examples/postgresql/lamport/lamport.c line 58 function thr2
20 -> 21 : fence
(between file ../examples/postgresql/lamport/lamport.c line 68 function thr2 and file ../examples/postgresql/lamport/lamport.c line 69 function thr2
3 -> 4 : fence
(between file ../examples/postgresql/lamport/lamport.c line 18 function thr1 and file ../examples/postgresql/lamport/lamport.c line 19 function thr1
5 -> 6 : fence
(between file ../examples/postgresql/lamport/lamport.c line 23 function thr1 and file ../examples/postgresql/lamport/lamport.c line 24 function thr1
16 -> 17 : fence
(between file ../examples/postgresql/lamport/lamport.c line 60 function thr2 and file ../examples/postgresql/lamport/lamport.c line 61 function thr2
18 -> 21 : fence
(between file ../examples/postgresql/lamport/lamport.c line 65 function thr2 and file ../examples/postgresql/lamport/lamport.c line 69 function thr2
1 -> 4 : fence
(between file ../examples/postgresql/lamport/lamport.c line 15 function thr1 and file ../examples/postgresql/lamport/lamport.c line 19 function thr1
0 -> 2 : fence
(between file ../examples/postgresql/lamport/lamport.c line 14 function thr1 and file ../examples/postgresql/lamport/lamport.c line 16 function thr1
14 -> 17 : fence
(between file ../examples/postgresql/lamport/lamport.c line 57 function thr2 and file ../examples/postgresql/lamport/lamport.c line 61 function thr2
5 -> 8 : fence
(between file ../examples/postgresql/lamport/lamport.c line 23 function thr1 and file ../examples/postgresql/lamport/lamport.c line 27 function thr1
13 -> 15 : fence
(between file ../examples/postgresql/lamport/lamport.c line 56 function thr2 and file ../examples/postgresql/lamport/lamport.c line 58 function thr2
20 -> 22 : fence
(between file ../examples/postgresql/lamport/lamport.c line 68 function thr2 and file ../examples/postgresql/lamport/lamport.c line 72 function thr2
7 -> 9 : fence
(between file ../examples/postgresql/lamport/lamport.c line 26 function thr1 and file ../examples/postgresql/lamport/lamport.c line 30 function thr1

