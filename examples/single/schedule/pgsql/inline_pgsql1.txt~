# 1,2 : latches for worker1, worker2
# 3, 4: flags for worker1, worker2


# Ressult: 0, 0, 5


thread worker1

initial q0

transition q0	q1	read	latch1	1
transition q1	q2	check 	!= latch1 0
transition q1	q0	check 	== latch1 0

transition q2	q3	write 	0	1

transition q3 	q4	read 	flag1	3
transition q4	q5 	check 	!= flag1 0
transition q4 	q8 	check	== flag1 0
transition q5 	q6	write 	0	3
transition q6	q7	write	1	4
transition q7	q8	write	1	2

transition q8	q9	read  	latch1 	1
transition q9	q10 	check 	!= latch1 0
transition q9	q8	check 	== latch1 0

transition q10	q2	noop

end

thread worker2

initial q0
transition q0	q1	read	latch2	2
transition q1	q2	check 	!= latch2 0
transition q1	q0	check 	== latch2 0

transition q2	q3	write 	0	2

transition q3 	q4	read 	flag2	4
transition q4	q5 	check 	!= flag2 0
transition q4 	q8 	check	== flag2 0
transition q5 	q6	write 	0	4
transition q6	q7	write	1	3
transition q7	q8	write	1	1

transition q8	q9	read  	latch2 	2
transition q9	q10 	check 	!= latch2 0
transition q9	q8	check 	== latch2 0

transition q10	q2	noop

end

